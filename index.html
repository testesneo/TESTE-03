<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sorteador Unidos Pela F√©</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .number-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 6px;
        }
        
        @media (min-width: 640px) {
            .number-grid {
                grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
                gap: 8px;
            }
        }
        
        .number-btn {
            aspect-ratio: 1;
            border-radius: 8px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 12px;
            min-height: 44px;
            cursor: pointer;
        }
        
        @media (min-width: 640px) {
            .number-btn {
                border-radius: 12px;
                font-size: 14px;
            }
        }
        
        .number-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .number-btn.available {
            background: rgba(255, 255, 255, 0.9);
            color: #4f46e5;
            border-color: rgba(79, 70, 229, 0.3);
        }
        
        .number-btn.taken {
            background: rgba(239, 68, 68, 0.8);
            color: white;
        }
        
        .number-btn.winner {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            animation: pulse-winner 2s infinite;
        }
        
        .number-btn.my-number {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: 3px solid #fbbf24;
        }
        
        @keyframes pulse-winner {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f59e0b;
            animation: confetti-fall 3s linear infinite;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
            padding: 16px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .tab-button {
            padding: 8px 12px;
            border-radius: 8px 8px 0 0;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
            flex: 1;
            min-width: 0;
            text-align: center;
        }
        
        @media (min-width: 640px) {
            .tab-button {
                padding: 12px 24px;
                font-size: 14px;
                flex: none;
            }
        }
        
        .tab-button.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-bottom: 3px solid #fbbf24;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .admin-nav-btn {
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .admin-nav-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }

        .admin-nav-btn.active {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-bottom: 2px solid #fbbf24;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }
        
        .winner-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.05); }
            70% { transform: translate(-50%, -50%) scale(0.9); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="gradient-bg min-h-full"><!-- Maintenance Notice -->
  <div id="maintenance-notice" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
   <div class="glass-effect rounded-2xl p-8 max-w-md mx-4 w-full text-center">
    <h2 class="text-3xl font-bold text-white mb-4">üîß Sistema em Manuten√ß√£o</h2>
    <p id="maintenance-message-display" class="text-white text-lg mb-6">Sistema em manuten√ß√£o. Voltaremos em breve!</p>
    <div class="text-white text-sm opacity-70">
     <p>Apenas administradores podem acessar o sistema durante a manuten√ß√£o.</p>
    </div>
   </div>
  </div>
  <div class="container mx-auto px-4 py-8 max-w-6xl"><!-- Header -->
   <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 gap-4">
    <div class="floating-animation flex-1">
     <h1 id="main-title" class="text-2xl md:text-4xl font-bold text-white mb-2">üé≤ Sorteador</h1>
     <p id="main-description" class="text-lg md:text-xl text-white opacity-90">Sorteador do Unidos Pela F√©, grupo cat√≥lico</p>
    </div>
    <div class="flex gap-2 w-full lg:w-auto"><button id="admin-login-toggle" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-3 py-2 rounded-lg transition-all backdrop-blur-sm text-sm flex-1 lg:flex-none"> üîê Admin </button>
    </div>
   </div><!-- Navigation Tabs -->
   <div class="glass-effect rounded-t-2xl mb-0">
    <div class="flex flex-wrap gap-1 p-2 sm:gap-2 sm:p-4"><button class="tab-button active" data-tab="sorteio">üéØ Sorteio</button> <button class="tab-button" data-tab="avisos">üì¢ Avisos</button> <button class="tab-button" data-tab="historico">üìä Hist√≥rico</button> <button class="tab-button" data-tab="admin" id="admin-tab" style="display: none;">üëë Admin</button>
    </div>
   </div><!-- Tab Contents -->
   <div class="glass-effect rounded-b-2xl rounded-tr-2xl p-6"><!-- Sorteio Tab -->
    <div id="sorteio-tab" class="tab-content active"><!-- User Status -->
     <div id="user-status" class="bg-blue-500 bg-opacity-20 rounded-xl p-4 mb-6 hidden">
      <h3 class="text-white font-bold mb-2">üì± Seu Status</h3>
      <div id="user-info" class="text-white"></div>
     </div><!-- Participation Form -->
     <div id="participation-form" class="mb-8">
      <h2 class="text-2xl font-bold text-white mb-4">‚ú® Participar do Sorteio</h2>
      <form id="participant-form" class="space-y-4">
       <div class="space-y-4">
        <div><label for="participant-name" class="block text-white mb-2 text-sm font-medium">Seu Nome Completo:</label> <input type="text" id="participant-name" required class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-base" placeholder="Digite seu nome completo">
        </div>
        <div><label for="participant-city" class="block text-white mb-2 text-sm font-medium">Sua Cidade:</label> <input type="text" id="participant-city" required class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-base" placeholder="Digite sua cidade">
        </div>
        <div><label for="participant-whatsapp" class="block text-white mb-2 text-sm font-medium">WhatsApp ou Nome no WhatsApp:</label> <input type="text" id="participant-whatsapp" required class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-base" placeholder="Ex: 11999887766 ou @seunome">
        </div>
        <div><label for="chosen-number-input" class="block text-white mb-2 text-sm font-medium">Escolha seu n√∫mero (1-<span id="max-number-label">100</span>):</label>
         <div class="flex gap-2"><input type="number" id="chosen-number-input" min="1" required class="flex-1 px-4 py-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 border border-white border-opacity-30 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 text-base" placeholder="Digite um n√∫mero"> <button type="button" id="random-number-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-lg font-semibold transition-all whitespace-nowrap"> üé≤ Aleat√≥rio </button>
         </div>
        </div>
       </div><button type="submit" id="participate-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-4 rounded-lg font-semibold transition-all text-lg mt-6"> üéØ Participar do Sorteio </button>
      </form>
     </div><!-- Counters -->
     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <div class="bg-blue-500 bg-opacity-20 rounded-xl p-4 text-center">
       <div class="text-2xl font-bold text-white" id="counter-available">
        100
       </div>
       <div class="text-white text-sm opacity-80">
        Dispon√≠veis
       </div>
      </div>
      <div class="bg-red-500 bg-opacity-20 rounded-xl p-4 text-center">
       <div class="text-2xl font-bold text-white" id="counter-taken">
        0
       </div>
       <div class="text-white text-sm opacity-80">
        Ocupados
       </div>
      </div>
      <div class="bg-green-500 bg-opacity-20 rounded-xl p-4 text-center">
       <div class="text-2xl font-bold text-white" id="counter-winners">
        0
       </div>
       <div class="text-white text-sm opacity-80">
        Vencedores
       </div>
      </div>
      <div class="bg-purple-500 bg-opacity-20 rounded-xl p-4 text-center">
       <div class="text-2xl font-bold text-white" id="counter-progress">
        0%
       </div>
       <div class="text-white text-sm opacity-80">
        Preenchido
       </div>
      </div>
     </div><!-- Progress Bar -->
     <div class="bg-white bg-opacity-10 rounded-xl p-4 mb-6">
      <div class="flex justify-between items-center mb-2"><span class="text-white font-semibold">Progresso do Sorteio</span> <span class="text-white text-sm" id="progress-text">0 / 100</span>
      </div>
      <div class="w-full bg-white bg-opacity-20 rounded-full h-3">
       <div id="progress-bar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
      </div>
     </div><!-- Draw Announcements -->
     <div id="draw-announcements-section" class="mb-6"><!-- Draw announcements will appear here -->
     </div><!-- Numbers Grid -->
     <div class="mb-8">
      <div class="flex justify-between items-center mb-4">
       <h2 class="text-2xl font-bold text-white">üé≤ Grade de N√∫meros (<span id="grid-size">100</span> n√∫meros)</h2>
       <div class="text-white text-sm"><span class="inline-block w-4 h-4 bg-white bg-opacity-90 rounded mr-2"></span>Dispon√≠vel <span class="inline-block w-4 h-4 bg-red-500 rounded mr-2 ml-4"></span>Ocupado <span class="inline-block w-4 h-4 bg-green-500 rounded mr-2 ml-4"></span>Vencedor
       </div>
      </div>
      <div id="numbers-grid" class="number-grid"><!-- Numbers will be generated here -->
      </div>
     </div><!-- Participants List -->
     <div>
      <h2 class="text-2xl font-bold text-white mb-4">üë• Participantes (<span id="participant-count">0</span>)</h2>
      <div id="participants-list" class="space-y-2">
       <p class="text-white opacity-70">Nenhum participante ainda...</p>
      </div>
     </div>
    </div><!-- Avisos Tab -->
    <div id="avisos-tab" class="tab-content">
     <h2 class="text-2xl font-bold text-white mb-6">üì¢ Avisos e Informa√ß√µes</h2>
     <div class="space-y-6"><!-- Acessibilidade -->
      <div class="bg-purple-500 bg-opacity-20 rounded-xl p-6">
       <h3 class="text-xl font-bold text-white mb-4">‚ôø Acessibilidade</h3>
       <div class="space-y-4"><!-- Font Size Control -->
        <div class="bg-white bg-opacity-10 rounded-lg p-4">
         <h4 class="text-white font-semibold mb-3">üî§ Tamanho da Fonte</h4>
         <div class="flex items-center gap-4"><label for="public-font-size-slider" class="text-white text-sm">Tamanho:</label> <input type="range" id="public-font-size-slider" min="12" max="24" value="16" class="flex-1"> <span id="public-font-size-value" class="text-white font-bold">16px</span>
         </div>
         <p class="text-white text-xs opacity-80 mt-2">Ajuste o tamanho da fonte para melhor legibilidade</p>
        </div><!-- High Contrast -->
        <div class="bg-white bg-opacity-10 rounded-lg p-4">
         <h4 class="text-white font-semibold mb-3">üé® Alto Contraste</h4>
         <div class="flex items-center justify-between">
          <div>
           <p class="text-white text-sm">Ativar modo de alto contraste</p>
           <p class="text-white text-xs opacity-80">Melhora a visibilidade para pessoas com baixa vis√£o</p>
          </div><button id="public-toggle-contrast-btn" class="bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded-lg font-semibold transition-all text-sm"> <span id="public-contrast-status">Ativar</span> </button>
         </div>
        </div><!-- Keyboard Navigation -->
        <div class="bg-white bg-opacity-10 rounded-lg p-4">
         <h4 class="text-white font-semibold mb-3">‚å®Ô∏è Navega√ß√£o por Teclado</h4>
         <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-white text-xs">
          <p><strong>Tab:</strong> Navegar entre elementos</p>
          <p><strong>Enter/Espa√ßo:</strong> Ativar bot√µes</p>
          <p><strong>Setas:</strong> Navegar em listas</p>
          <p><strong>Esc:</strong> Fechar modais</p>
         </div>
        </div>
       </div>
      </div><!-- Sistema Status -->
      <div class="bg-green-500 bg-opacity-20 rounded-xl p-6">
       <h3 class="text-xl font-bold text-white mb-4">‚úÖ Status do Sistema</h3>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-white bg-opacity-10 rounded-lg p-4">
         <div class="flex items-center mb-2"><span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-2"></span> <span class="text-white font-semibold">Servidor Online</span>
         </div>
         <p class="text-white text-sm opacity-80">Sistema funcionando normalmente</p>
        </div>
        <div class="bg-white bg-opacity-10 rounded-lg p-4">
         <div class="flex items-center mb-2"><span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-2"></span> <span class="text-white font-semibold">Banco de Dados</span>
         </div>
         <p class="text-white text-sm opacity-80">Dados seguros e sincronizados</p>
        </div>
       </div>
      </div><!-- Regras -->
      <div class="bg-yellow-500 bg-opacity-20 rounded-xl p-6">
       <h3 class="text-xl font-bold text-white mb-4">üìã Regras do Sorteio</h3>
       <ul class="space-y-2 text-white">
        <li class="flex items-start gap-2"><span class="text-yellow-400">‚Ä¢</span> <span>Cada pessoa pode escolher apenas UM n√∫mero</span></li>
        <li class="flex items-start gap-2"><span class="text-yellow-400">‚Ä¢</span> <span>N√∫meros de 1 a <span id="rules-max-number">100</span> dispon√≠veis</span></li>
        <li class="flex items-start gap-2"><span class="text-yellow-400">‚Ä¢</span> <span>WhatsApp obrigat√≥rio para contato</span></li>
        <li class="flex items-start gap-2"><span class="text-yellow-400">‚Ä¢</span> <span>Sorteio realizado de forma aleat√≥ria e transparente</span></li>
       </ul>
      </div>
     </div>
    </div><!-- Hist√≥rico Tab -->
    <div id="historico-tab" class="tab-content">
     <h2 class="text-2xl font-bold text-white mb-6">üìä Hist√≥rico de Sorteios</h2>
     <div id="history-content" class="space-y-6"><!-- Sorteio Atual -->
      <div class="bg-blue-500 bg-opacity-20 rounded-xl p-6">
       <h3 class="text-xl font-bold text-white mb-4">üéØ Sorteio Atual</h3>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-white bg-opacity-10 rounded-lg p-4 text-center">
         <div class="text-3xl font-bold text-white" id="current-participants">
          0
         </div>
         <div class="text-white text-sm opacity-80">
          Participantes
         </div>
        </div>
        <div class="bg-white bg-opacity-10 rounded-lg p-4 text-center">
         <div class="text-3xl font-bold text-white" id="current-available">
          100
         </div>
         <div class="text-white text-sm opacity-80">
          N√∫meros Dispon√≠veis
         </div>
        </div>
        <div class="bg-white bg-opacity-10 rounded-lg p-4 text-center">
         <div class="text-3xl font-bold text-white" id="current-winner">
          -
         </div>
         <div class="text-white text-sm opacity-80">
          Vencedores
         </div>
        </div>
       </div>
      </div><!-- √öltimos Vencedores -->
      <div class="bg-green-500 bg-opacity-20 rounded-xl p-6">
       <h3 class="text-xl font-bold text-white mb-4">üèÜ √öltimos Vencedores</h3>
       <div id="winners-history" class="space-y-3">
        <p class="text-white opacity-70">Nenhum vencedor ainda...</p>
       </div>
      </div>
     </div>
    </div><!-- Admin Tab -->
    <div id="admin-tab-content" class="tab-content">
     <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-white">üëë Painel Administrativo</h2><button id="logout-admin" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all"> Sair </button>
     </div><!-- Admin Navigation -->
     <div class="flex flex-wrap gap-2 mb-6"><button class="admin-nav-btn active" data-sectio
